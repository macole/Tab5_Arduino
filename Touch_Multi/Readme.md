# Touch_Multi - マルチタッチ対応

M5Stack Tab5のマルチタッチ機能を使用して、複数のタッチポイントを同時に検出するプログラムです。

## 📋 概要

このプログラムは、M5Stack Tab5のマルチタッチ機能を使用して、最大5点のタッチポイントを同時に検出し、各タッチポイントの座標と状態を画面に表示します。

## 🔧 必要なハードウェア

- M5Stack Tab5

## 📚 必要なライブラリ

- **M5Unified**: M5Stack統合ライブラリ
  ```bash
  arduino-cli lib install "M5Unified@0.2.10"
  ```
- **M5GFX**: M5Stack用グラフィックライブラリ
  ```bash
  arduino-cli lib install "M5GFX@0.2.15"
  ```

## 🚀 セットアップ

1. **ボード設定**
   - Board: ESP32P4 Dev Module
   - USB CDC on boot: Enabled
   - Flash Size: 16MB (128Mb)
   - Partition Scheme: Custom
   - PSRAM: Enabled

2. **プログラムのアップロード**
   - Arduino IDEまたはArduino CLIでプログラムをアップロード

## 💻 使用方法

1. プログラムをアップロード
2. 画面を複数の指でタッチします
3. 各タッチポイントの座標とIDが画面に表示されます
4. 最大5点まで同時に検出できます

## 📊 機能

- **マルチタッチ検出**: 最大5点のタッチポイントを同時に検出
- **タッチ座標表示**: 各タッチポイントのX座標、Y座標を表示
- **タッチID表示**: 各タッチポイントにIDを割り当てて表示
- **リアルタイム更新**: タッチ状態がリアルタイムで更新

## 🔍 プログラムの動作

1. **初期化**
   - M5Stackの初期化
   - 画面の設定
   - タッチ検出の準備

2. **タッチ検出ループ**
   - タッチポイントを取得（最大5点）
   - 各タッチポイントの座標を取得
   - 画面にタッチ情報を表示

## 📝 コードの主要なポイント

### タッチポイントの配列
```cpp
m5::touch_point_t touchPoint[5];  // 最大5点のタッチポイント
```

### タッチポイントの取得
```cpp
int nums = M5.Lcd.getTouchRaw(touchPoint, 5);
```

### タッチポイントの表示
```cpp
for (int i = 0; i < nums; i++) {
    // 各タッチポイントの座標とIDを表示
    M5.Display.printf("Touch %d: X=%d, Y=%d\n", 
                      touchPoint[i].id, 
                      touchPoint[i].x, 
                      touchPoint[i].y);
}
```

## 🎮 操作方法

- **単一タッチ**: 1本の指で画面をタッチ
- **マルチタッチ**: 複数の指で同時に画面をタッチ（最大5点）
- **タッチ移動**: 指を動かすと座標が更新されます

## 📄 ライセンス

このプログラムはMITライセンスの下で公開されています。

Copyright (c) 2025 macole

詳細はプロジェクトルートの`LICENSE`ファイルを参照してください。

---

**作成日**: 2025年11月  
**対象デバイス**: M5Stack Tab5  
**動作確認**: ✅ 正常動作確認済み
