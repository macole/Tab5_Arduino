# Speaker - スピーカーテスト

M5Stack Tab5の内蔵スピーカーを使用して、様々な周波数の音を出力するテストプログラムです。

## 📋 概要

このプログラムは、M5Stack Tab5の内蔵スピーカーを使用して、異なる周波数の音を順番に出力します。スピーカーの動作確認と音階テストに使用できます。

## 🔧 必要なハードウェア

- M5Stack Tab5

## 📚 必要なライブラリ

- **M5Unified**: M5Stack統合ライブラリ
  ```bash
  arduino-cli lib install "M5Unified@0.2.10"
  ```

## 🚀 セットアップ

1. **ボード設定**
   - Board: ESP32P4 Dev Module
   - USB CDC on boot: Enabled
   - Flash Size: 16MB (128Mb)
   - Partition Scheme: Custom
   - PSRAM: Enabled

2. **プログラムのアップロード**
   - Arduino IDEまたはArduino CLIでプログラムをアップロード

## 💻 使用方法

1. プログラムをアップロード
2. 画面に「Speaker Test」が表示されます
3. 1秒ごとに異なる周波数の音が順番に出力されます：
   - 10kHz → 8kHz → 6kHz → 4kHz → 2kHz

## 📊 機能

- **周波数テスト**: 5種類の異なる周波数の音を出力
- **順次再生**: 1秒間隔で順番に音を出力
- **画面表示**: テスト中であることを画面に表示

## 🔍 プログラムの動作

1. **初期化**
   - M5Stackの初期化
   - 画面を白色でクリア
   - 「Speaker Test」を画面中央に表示

2. **音声出力ループ**
   - 10kHzの音を60ms出力
   - 1秒待機
   - 8kHzの音を60ms出力
   - 1秒待機
   - 以下、6kHz、4kHz、2kHzを順番に繰り返し

## 📝 コードの主要なポイント

### スピーカーの音声出力
```cpp
M5.Speaker.tone(frequency, duration);
```

- **frequency**: 周波数（Hz）
- **duration**: 持続時間（ミリ秒）

### 出力される周波数
- 10kHz: 高音
- 8kHz: やや高音
- 6kHz: 中音
- 4kHz: やや低音
- 2kHz: 低音

## 🎵 カスタマイズ

### 周波数の変更
```cpp
M5.Speaker.tone(1000, 100);  // 1kHz、100ms
```

### 音量の調整
```cpp
M5.Speaker.setVolume(128);  // 0-255の範囲で設定
```

### メロディーの作成
```cpp
// ドレミファソラシド
int notes[] = {262, 294, 330, 349, 392, 440, 494, 523};
for (int i = 0; i < 8; i++) {
    M5.Speaker.tone(notes[i], 200);
    delay(250);
}
```

## 🔧 トラブルシューティング

### 音が聞こえない場合
- スピーカーが正常に動作しているか確認してください
- 音量が0になっていないか確認してください
- シリアルモニターでエラーメッセージを確認してください

### 音が歪む場合
- 周波数が高すぎる可能性があります（20kHz以下を推奨）
- 音量を下げてみてください

## 📄 ライセンス

このプログラムはMITライセンスの下で公開されています。

Copyright (c) 2025 macole

詳細はプロジェクトルートの`LICENSE`ファイルを参照してください。

---

**作成日**: 2025年11月  
**対象デバイス**: M5Stack Tab5  
**動作確認**: ✅ 正常動作確認済み
